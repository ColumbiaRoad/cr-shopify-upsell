<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset='utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1'>

	<title>Svelte app</title>

	<link rel='stylesheet' href='/build/global.css'>
	<link rel='stylesheet' href='/build/bundle.css'>


	<script src="https://unpkg.com/@shopify/app-bridge"></script>

	<script>
        var AppBridge = window['app-bridge'];
        var Actions = window['app-bridge'].actions;
        var Redirect = Actions.Redirect;

        var createApp = AppBridge.default;
        var apiKey = '{{index . "apiKey"}}'
        var app = createApp({
            apiKey: apiKey,
            shopOrigin: '{{index . "shop"}}'
        });
        var initBilling = function() {
            console.log('url ', 'https://tacos.eu.ngrok.io/v1/shopify/billing/create?shop={{index . "shop"}}')
            window.location.replace = 'https://tacos.eu.ngrok.io/v1/shopify/billing/create?shop={{index . "shop"}}';
        }
        window['subscribed'] = '{{index . "subscribed"}}' === 'true';
    </script>

	<script defer src='/build/bundle.js'></script>
</head>

<body>
<main class="container">
    <div style="margin-top:40px">
        <div class="display-3" id="shop-url">You made it! ðŸ¥³ </div>
        <p class="mt">This page is using the <a href="https://github.com/ablesense/bootstrap-polaris" target="_blank">Bootstrap Polaris theme</a> which gives you the things you need to adhere to the Polaris style guide required by Shopify.</p>
        <p class="mt">You can use whatever tools you like to create the app, there are some decent guides out there for React and other frameworks. </p>
        <p class="mt">{{index . "shop"}}, {{index . "apiKey"}}</p>
    </div>
    <div style="margin-top:50px; margin-bottom: 100px">
        <div class="card">
            <div class="card-body">
                <h3>Find me a taco</h3>
                <p>We love tacos and believe your should eat them all the time.</p>
                <p><button type="button" class="btn btn-primary" onclick="initBilling()">Setup subscription</button></p>
                <p class="display-3" id="tacoText"></p>
            </div>
        </div>
    </div>
</main>
</body>

</html>